{"version":3,"sources":["clojulator/web/core.cljs"],"mappings":";AAUA,yDAAA,zDAACA,yHAEA,WAAKC,EAAEA;AAAP,AAAA,kDAAA,0IAAA,kEAAA,jJACY,6CAAA,7CAACC;;AAGd,yDAAA,zDAACF,yHAEA,cAAAG,HAAKG;AAAL,AAAA,IAAAF,aAAAD;QAAA,AAAAE,4CAAAD,WAAA,IAAA,/DAASH;iBAAT,AAAAI,4CAAAD,WAAA,IAAA,xEAAWG;AAAX,AACE,IAAAC,aAAiB,AAACE,qCAAUH,WAAW,AAAA,yFAAUD;YAAjD,AAAAD,4CAAAG,WAAA,IAAA,nEAAOP;aAAP,AAAAI,4CAAAG,WAAA,IAAA,pEAASC;AAAT,AACE,wDAAA,jDAACE,8CAAML,qEAAeG;;AAK3B,2DAAA,3DAACG,iLAEA,WAAKN,GAAGL;AAAR,AAAW,OAAA,gGAAaK;;AAKzB,uCAAA,vCAAMS,sFACHC;AADH,AAAA,0FAAA,mDAAA,2CAAA,wDAAA,eAAA,mFAAA,uDAAA,2CAAA,oDAAA,kBAAA,wDAAA,qBAAA,qBAAA,mFAAA,sDAAA,2CAAA,qDAAA,OAAA,wDAAA,eAAA,kDAAA,kBAAA,sDAAA,AAAAH,uBAAA,+DAAA,WAAAC,jFAQoBE;AARpB,AASwB,OAACC,sBAAOD,MAAM,AAAA,AAAAF;;;AAEtC,kCAAA,lCAAMI;AAAN,AAEE,IAAMT,SAAO,sDAAA,mFAAA,zIAACU;AAAd,AAAA,0FAAA,mDAAA,2CAAA,wDAAA,eAAA,mFAAA,uDAAA,2CAAA,oDAAA,mBAAA,wDAAA,qBAAA,iBAAA,mFAAA,sDAAA,2CAAA,qDAAA,OAAA,wDAAA,eAAA,kDAAA,mBAAA,sDAAA,AAAAN,wBAAA,8DAAA,KAAA,+DAAA,1IAOoBJ;;AAItB,sCAAA,tCAAMW;AAAN,AAEE,IAAMb,aAAW,gDAAA,hDAACc;AAAlB,AACE;AAAA,AAAA,0FAAA,mDAAA,2CAAA,wDAAA,kGAAA,mFAAA,mDAAA,2CAAA,wDAAA,6CAAA,mFAAA,yDAAA,2CAAA,qDAAA,SAAA,wDAAA,kBAAA,6DAAA,ruBAGG,AAACN,qCAAiBR,YAClB,AAACW;AAJJ,AAQyB,8BAAA,mFAAA,gEAAA,AAAAL,1KAACS,0LAAyBf;WARnD;;;AAUJ,4BAAA,5BAAMgB;AAAN,AAAA,0FAAA,mDAAA,2CAAA,wDAAA,gDAAA,mFAAA,kDAAA,qBAAA,mFAKIH;;AAKJ,GAAA,QAAAI,uCAAAC,2CAAAC,gDAAAC;AAAA;AAAA,AAAA,AAASC,qCACP,AAACC,+BAAgB,wBAAA,xBAACC;;AAEpB,+BAAA,/BAAMC;AAAN,AAEE,kGAAA,3FAACC,wDAAWJ,sHAAgBL;;AAE9B,2BAAA,3BAAeU;AAAf,AACE,AAACC;;AACD,4BAAA,mFAAA,/GAACC;;AACD,OAACJ","names":["re_frame.core.reg_event_db","_","cljs.core.atom","p__39872","vec__39873","cljs.core.nth","db","expression","vec__39876","result","clojulator.calculator.core/calculate","cljs.core.assoc","re_frame.core.reg_sub","cljs.core/deref","p1__39882#","clojulator.web.core/expression-input","value","cljs.core/reset!","clojulator.web.core/output-view","re_frame.core.subscribe","clojulator.web.core/calculator-view","reagent.core.atom","re-frame.core/dispatch","clojulator.web.core/index","js/clojulator","js/clojulator.web","js/clojulator.web.core","js/clojulator.web.core.root-container","clojulator.web.core/root-container","reagent.dom.client/create-root","js/document.getElementById","clojulator.web.core/mount-ui","reagent.dom.client.render","clojulator.web.core/main","cljs.core/enable-console-print!","re-frame.core/dispatch-sync"],"sourcesContent":["(ns clojulator.web.core\n  (:require\n   [reagent.core :as r]\n   [reagent.dom.client :as rdc]\n   [re-frame.core :as rf]\n   [clojulator.calculator.core :refer [calculate]]))\n\n;; ----------------------------------\n;; Event Handlers\n\n(rf/reg-event-db\n :initialize\n (fn [_ _]\n   {:history (atom [])\n    :lastResult \"\"}))\n\n(rf/reg-event-db\n :calculate\n (fn [db [_ expression]]\n   (let [[_ result] (calculate expression (:history db))]\n     (assoc db :lastResult result))))\n\n;; ----------------------------------\n;; Subscriptions\n\n(rf/reg-sub\n :last-result\n (fn [db _] (:lastResult db)))\n\n;; ----------------------------------\n;; Views\n\n(defn expression-input\n  [value]\n  [:div\n   {:class \"mb-3\"}\n   [:label {:for \"expressionInput\" :class \"form-label\"} \"Expression\"]\n   [:input {:type \"text\"\n            :class \"form-control\"\n            :id \"expressionInput\"\n            :value @value\n            :on-change #(reset! value (-> % .-target .-value))}]])\n\n(defn output-view\n  []\n  (let [result (rf/subscribe [:last-result])]\n    [:div\n     {:class \"mb-3\"}\n     [:label {:for \"expressionOutput\" :class \"form-label\"} \"Result\"]\n     [:input {:type \"text\"\n              :class \"form-control\"\n              :id \"expressionOutput\"\n              :value @result\n              :disabled true\n              :read-only true}]]))\n\n(defn calculator-view\n  []\n  (let [expression (r/atom nil)]\n    (fn []\n      [:div\n       {:class \"w-50\"}\n       (expression-input expression)\n       (output-view)\n       [:div\n        {:class \"mb-3 d-flex justify-content-center\"}\n        [:button {:type \"button\" :class \"btn btn-primary\"\n                  :on-click #(rf/dispatch [:calculate @expression])} \"Calculate\"]]])))\n\n(defn index\n  []\n  [:div\n   {:class \"d-flex flex-column align-items-center\"}\n   [:h1 \"Clojulator\"]\n   [calculator-view]])\n\n;; ----------------------------------\n;; Entry Point\n\n(defonce root-container\n  (rdc/create-root (js/document.getElementById \"app\")))\n\n(defn mount-ui\n  []\n  (rdc/render root-container [index]))\n\n(defn ^:export main []\n  (enable-console-print!)\n  (rf/dispatch-sync [:initialize])\n  (mount-ui))\n"]}